﻿<!doctype html>
<!-- The Time Machine GitHub pages theme was designed and developed by Jon Rohan, on Feb 7, 2012. -->
<!-- Follow him for fun. http://twitter.com/jonrohan. Tail his code on http://github.com/jonrohan -->
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <link rel="stylesheet" href="../stylesheets/stylesheet.css" media="screen">
  <link rel="stylesheet" href="../stylesheets/pygment_trac.css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script type="text/javascript" src="../javascripts/script.js"></script>

  <title>马文斌@博客</title>
  <meta name="description" content="">

  <meta name="viewport" content="width=device-width,initial-scale=1">

</head>

<body>

  <div class="wrapper">
    <header>
      <h1 class="title">马文斌@博客</h1>
    </header>
    <div id="container">
      <p class="tagline"></p>
      <div id="main" role="main">
        <div class="download-bar">
        <div class="inner">
          <a href="https://github.com/mwb1219" class="code">阅读正文</a>
        </div>
        <span class="blc"></span><span class="trc"></span>
        </div>
        <article class="markdown-body">
		


<!-- Blog Post -->
<!-- Title -->
<h2>
  Java语言实现Memcached缓存技术
  <div class="post-date"><a href="https://github.com/panxw/panxw.github.com/edit/master/_posts/2014-10-20-Memcached-Achieve.md" target="_blank">纠错</a>&nbsp;&nbsp;
	<span class="glyphicon glyphicon-time"></span>
	20 Oct 2014
  </div>
</h2>
<!-- Author -->
<hr>
<h2>、在windows下实现Memcached缓存技术步骤</h2>

<ol>
<li>下载<strong>memcached-1.2.1-win32.zip</strong>并且解压.</li>
<li><p>在项目中导入必要的包：</p>

<p> alisoft-xplatform-asf-cache-2.5.1.jar</p>

<p> commons-logging-1.0.3.jar</p>

<p> log4j-1.2.13.jar</p></li>
<li><p>创建工具类MemCachedUtil</p></li>
<li>新建一个配置文件MemCached.xml</li>
</ol>


<h2>一、Windows安装memcached</h2>

<h3>1.1、Memcached-win64 下载：</h3>

<ol>
<li>下载最新版：<a href="http://blog.couchbase.com/memcached-windows-64-bit-pre-release-available">http://blog.couchbase.com/memcached-windows-64-bit-pre-release-available</a></li>
<li>直接下载： memcached-win64-1.4.4-14.zip
<a href="http://www.2cto.com/uploadfile/2012/0713/20120713110308123.zip">http://www.2cto.com/uploadfile/2012/0713/20120713110308123.zip</a></li>
</ol>


<h3>1.2、解压放某个盘下面，比如:</h3>

<p>D:\WampServer\bin\memcached\memcached.exe</p>

<h3>1.3. 在终端（也即cmd命令界面）下输入以下命令安装windows服务:</h3>

<p>D:\WampServer\bin\memcached>memcached.exe -d install</p>

<h3>1.4、再输入下面命令启动：</h3>

<p>D:\WampServer\bin\memcached>memcached.exe -d start</p>

<h2>二、Java实现Memcached缓存</h2>

<h3>2.1、向POM.xml中添加如下代码</h3>

<pre><code>&lt;!-- xmemcached缓存 --&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;com.googlecode.xmemcached&lt;/groupId&gt;
        &lt;artifactId&gt;xmemcached&lt;/artifactId&gt;
        &lt;version&gt;2.0.0&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>

<h3>2.2、添加一个管理类MemcachedManager</h3>

<pre><code>public class MemcachedManager {
    private static MemcachedClient mcc;
    static {
        try {
            String ip = "192.168.6.195";//设置memcached所在的Ip地址
            int port = 20000;//设置memcached的端口号
            if (mcc == null) {
                mcc = new XMemcachedClient(ip, port);
            }
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    public static MemcachedClient getInstance() {
        return mcc;
    }
}
</code></pre>

<h3>2.3、查询数据</h3>

<p><img src="/images/Memcached/memcached_achieve03.png" alt="&quot;memcached_achieve03.png&quot;" /></p>

<h3>2.4、更新数据</h3>

<p><img src="/images/Memcached/memcached_achieve04.png" alt="&quot;memcached_achieve04.png&quot;" /></p>

<h2>三、Memcached现状</h2>

<pre><code>1、支持更多协议，在已有协议支持的基础上添加了append、prepend、gets、批量gets、cas协议的支持，具体请查看XMemcachedClient类的实例方法。重点是cas操作。
2、memcached分布支持，支持连接多个memcached server，支持简单的余数分布和一致性哈希分布。
3、0.60版本以来的bug修复。
当前1.0-beta版本，支持memcached的分布式（余数哈希和一致性哈希算法）。目前已经支持get、set、add、replace、cas、 append、prepend、批量get/gets、delete、incr、decr、version这几个协议。API为阻塞模型，而非 spymemcached的异步模型，异步模型在批处理的时候有优势，但是阻塞模型在编程难度和使用上会容易很多。
</code></pre>

<h2>四、不理解的知识点</h2>

<pre><code>1、使用什么软件测试
2、怎么使用java实现Memcached缓存技术
3、MemCached怎么实现列表的缓存
4、数据库中增加、删除、修改数据时，缓存如何及时的反应
</code></pre>

<br/>
<div style="margin-top:10px;margin-bottom:10px">
  
  <span class="next">
    上篇：
    <a href="/2014/10/Git-Basic.html">
      Git基本语法学习笔记
    </a>
  </span>
   
  
  <span class="prev">
    下篇：
    <a href="/2014/10/Memcached-Basic.html">
      memcached究竟是如何运作的
    </a>
  </span>
  
</div>
<hr>
<!-- Blog Comments -->
<div class="media">
    <!-- UY BEGIN -->
  <div id="uyan_frame">
  </div>
  <script type="text/javascript" src="http://v2.uyan.cc/code/uyan.js?uid=1511840">
  </script>
  <!-- UY END --> 
</div>

        </article>
      </div>
    </div>
    <footer>
      <div class="owner">

      <p><a href="https://github.com/mwb1219" class="avatar"><img src="https://avatars1.githubusercontent.com/u/9292203?v=3&amp;s=60" width="48" height="48"></a>View <a href="https://github.com/mwb1219">mwb1219</a> on <a href="https://www.github.com">GitHub</a></p>

      </div>
      <div class="creThis page generated using <a href="http://pages.github.com/">GitHub Pages</a><br>theme by <a href="https://twitter.com/jonrohan/">Jon Rohan</a>i>

</ul></small>
      </div>
    </footer>
  </div>
  <div class="current-section">
    <a href="#top">Scroll to top</a>
    <a href="https://github.com/mwb1219/mwb1219.github.io/tarball/master" class="tar">tar</a><a href="https://github.com/mwb1219/mwb1219.github.io/zipball/master" class="zip">zip</a><a href="" class="code">source code</a>
    <p class="name"></p>
  </div>
  
</body>
</html>